"use strict";function obj_formatter(e){if(e.render.hasOwnProperty("url")){var t=[e.render.url.prefix,e.render.url.col],n=t[0],r=t[1];return e.render=function(e,t,a){return'<a href="'+n+a.id+' "target="_blank">'+a[r]+"</a>"},e}if(e.render.hasOwnProperty("float")){var a=[e.render.float.precision,e.render.float.scale,e.render.float.col],l=a[0],c=a[1],u=a[2];return e.render=function(e,t,a){return(a[u]*c).toFixed(l)},e}}$(document).ready(function(){var e,t,F=JSON.parse(document.getElementById("datatable-conf").textContent);F.hasOwnProperty("api")?(F.colsFields.forEach(function(e){e.hasOwnProperty("render")&&(e=obj_formatter(e))}),t={bFilter:F.search,hover:!0,serverSide:!0,ajax:F.api,columns:F.colsFields,order:F.order}):(e=[],F.dataQuery.forEach(function(t){var a=[];F.colsFields.forEach(function(e){a.push(t[e])}),e.push(a)}),t={bFilter:F.search,hover:!0,serverSide:!1,data:e,order:F.order},"source_detail"==F.table&&(t.columnDefs=[{targets:0,searchable:!0,visible:!1},{targets:1,data:"name",render:function(e,t,a){return'<a href="/measurements/'+a[0]+'"target="_blank">'+a[1]+"</a>"}},{targets:3,data:"image",render:function(e,t,a){return'<a href="/images/'+a[12]+'"target="_blank">'+a[3]+"</a>"}},{targets:4,data:"ra",render:function(e,t,a){return a[4].toFixed(4)}},{targets:5,data:"ra_err",render:function(e,t,a){return(3600*a[5]).toFixed(4)}},{targets:6,data:"dec",render:function(e,t,a){return a[6].toFixed(4)}},{targets:7,data:"dec_err",render:function(e,t,a){return(3600*a[7]).toFixed(4)}},{targets:8,data:"flux_int",render:function(e,t,a){return a[8].toFixed(3)}},{targets:9,data:"flux_int_err",render:function(e,t,a){return a[9].toFixed(3)}},{targets:10,data:"flux_peak",render:function(e,t,a){return a[10].toFixed(3)}},{targets:11,data:"flux_peak_err",render:function(e,t,a){return a[11].toFixed(3)}},{targets:14,searchable:!1,visible:!1}]));var j=$("#dataTable").DataTable(t);$("#catalogSearch").on("click",function(e){var t=document.getElementById("runSelect"),a=F.api;""!=t.value&&(a=a+"&run="+encodeURIComponent(t.value));var n=document.getElementById("coordUnit"),r=document.getElementById("objectSearch"),l=document.getElementById("objectService"),c=document.getElementById("radiusSelect"),u=document.getElementById("raSelect"),d=document.getElementById("decSelect"),o=document.getElementById("radiusUnit");r.value&&(a=a+"&objectname="+encodeURIComponent(r.value)),l.value&&(a=a+"&objectservice="+l.value),n.value&&(a=a+"&coordsys="+n.value),c.value&&(a=a+"&radius="+c.value),u.value&&(a=a+"&ra="+u.value),d.value&&(a=a+"&dec="+d.value),o.value&&(a=a+"&radiusunit="+o.value);var i=document.getElementById("aveFluxSelect"),m=document.getElementById("fluxMinSelect"),v=document.getElementById("fluxMaxSelect");m.value&&(a=a+"&min_"+i.value+"="+m.value),v.value&&(a=a+"&max_"+i.value+"="+v.value);var s=document.getElementById("varVMetricSelect"),S=document.getElementById("varVMinSelect"),g=document.getElementById("varVMaxSelect");S.value&&(a=a+"&min_"+s.value+"="+S.value),g.value&&(a=a+"&max_"+s.value+"="+g.value);var f=document.getElementById("varEtaMetricSelect"),x=document.getElementById("varEtaMinSelect"),y=document.getElementById("varEtaMaxSelect");x.value&&(a=a+"&min_"+f.value+"="+x.value),y.value&&(a=a+"&max_"+f.value+"="+y.value);var E=document.getElementById("datapointMinSelect"),I=document.getElementById("datapointMaxSelect");E.value&&(a=a+"&min_measurements="+E.value),I.value&&(a=a+"&max_measurements="+I.value);var _=document.getElementById("SelavyMinSelect"),B=document.getElementById("SelavyMaxSelect");_.value&&(a=a+"&min_selavy_measurements="+_.value),B.value&&(a=a+"&max_selavy_measurements="+B.value);var M=document.getElementById("ForcedMinSelect"),h=document.getElementById("ForcedMaxSelect");M.value&&(a=a+"&min_forced_measurements="+M.value),h.value&&(a=a+"&max_forced_measurements="+h.value);var p=document.getElementById("RelationsMinSelect"),b=document.getElementById("RelationsMaxSelect");p.value&&(a=a+"&min_relations="+p.value),b.value&&(a=a+"&max_relations="+b.value),document.getElementById("newSourceSelect").checked&&(a+="&newsrc"),document.getElementById("containsSiblingsSelect").checked&&(a+="&no_siblings"),j.ajax.url(a),j.ajax.reload()}),$("#resetSearch").on("click",function(e){$("#runSelect option").prop("selected",function(){return this.defaultSelected});for(var t,a=0,n=["objectSearch","fluxMinSelect","fluxMaxSelect","varVMinSelect","varVMaxSelect","varEtaMinSelect","varEtaMaxSelect","ForcedMinSelect","ForcedMaxSelect","raSelect","decSelect","radiusSelect","datapointMinSelect","datapointMaxSelect","RelationsMinSelect","RelationsMaxSelect","SelavyMinSelect","SelavyMaxSelect"];a<n.length;a++)t=n[a],document.getElementById(t).value="";document.getElementById("newSourceSelect").checked=!1,document.getElementById("containsSiblingsSelect").checked=!1,j.ajax.url(F.api),j.ajax.reload()})});

