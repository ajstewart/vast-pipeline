"use strict";Chart.defaults.global.defaultFontFamily="Nunito",Chart.defaults.global.defaultFontColor="#858796";var ctx=document.getElementById("lightCurveChart").getContext("2d"),dataConf=JSON.parse(document.getElementById("chart-data").textContent),data=[],data_f=[],labels=[],errors={},errors_f={};dataConf.dataQuery.forEach(function(r){var o=new Date(r.datetime),t=o.toISOString(),a=r.flux_int_err.toFixed(3),e=r.flux_int.toFixed(3);labels.push(t),1==r.forced?(data.push({x:o,y:null}),data_f.push({x:o,y:e}),errors[t]={plus:null,minus:null},errors_f[t]={plus:a,minus:-a}):(data.push({x:o,y:e}),data_f.push({x:o,y:null}),errors[t]={plus:a,minus:-a},errors_f[t]={plus:null,minus:null})});var conf={type:"line",data:{labels:labels,datasets:[{label:"Measured Flux",fill:!1,showLine:!1,backgroundColor:"rgba(78, 115, 223, 0.05)",borderColor:"rgba(78, 115, 223, 1)",pointRadius:5,pointBackgroundColor:"rgba(78, 115, 223, 1)",pointBorderColor:"rgba(78, 115, 223, 1)",pointHoverRadius:5,pointHoverBackgroundColor:"rgba(78, 115, 223, 1)",pointHoverBorderColor:"rgba(78, 115, 223, 1)",pointHitRadius:10,pointBorderWidth:2,data:data,errorBars:errors},{label:"Forced Flux",fill:!1,showLine:!1,backgroundColor:"rgba(78, 115, 223, 0.05)",borderColor:"rgba(78, 115, 223, 1)",pointRadius:5,pointBackgroundColor:"rgba(78, 115, 223, 1)",pointBorderColor:"rgba(78, 115, 223, 1)",pointHoverRadius:5,pointHoverBackgroundColor:"rgba(78, 115, 223, 1)",pointHoverBorderColor:"rgba(78, 115, 223, 1)",pointHitRadius:10,pointBorderWidth:2,pointStyle:"triangle",data:data_f,errorBars:errors_f,rotation:60}]},options:{maintainAspectRatio:!1,responsive:!0,layout:{padding:{left:10,right:25,top:5,bottom:0}},plugins:{chartJsPluginErrorBars:{width:15}},scales:{xAxes:[{type:"time",distribution:"linear",gridLines:{display:!1,drawBorder:!1},ticks:{maxTicksLimit:7}}],yAxes:[{scaleLabel:{display:!0,labelString:"Int. Flux (mJy)"},ticks:{maxTicksLimit:5,padding:10},gridLines:{color:"rgb(234, 236, 244)",zeroLineColor:"rgb(234, 236, 244)",drawBorder:!1,borderDash:[2],zeroLineBorderDash:[2]}}]},legend:{display:!0,align:"end",labels:{usePointStyle:!0}},tooltips:{backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",titleMarginBottom:10,titleFontColor:"#6e707e",titleFontSize:14,borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,intersect:!1,mode:"index",caretPadding:10,callbacks:{label:function(r,o){return(o.datasets[r.datasetIndex].label||"")+": "+r.yLabel+" mJy"}}}}};labels.length<2&&conf.options.scales.yAxes.forEach(function(r){r.hasOwnProperty("ticks")&&(r.ticks.suggestedMin=data[0].y-5,r.ticks.suggestedMax=data[0].y+5)});var myLineChart=new Chart(ctx,conf);