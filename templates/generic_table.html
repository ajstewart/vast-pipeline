{% extends "base.html" %}

{% load static %}

{% block head %}
  <!-- Custom styles for this page -->
  <link href="{% static 'vendor/datatables/dataTables.bootstrap4.min.css' %}" rel="stylesheet">
  <!-- Bootstrap-select minified CSS -->
  <link rel="stylesheet" href="{% static 'vendor/bootstrap-select/css/bootstrap-select.min.css' %}">

{% endblock head %}

{% block breadcrumb %}

<li class="breadcrumb-item">
  <a href="{{ text.breadcrumb.url }}">{{ text.breadcrumb.title }}</a>
</li>

{% endblock breadcrumb %}


{% block content %}
<!-- Begin Page Content -->
<div class="container-fluid">

  <div class="d-sm-flex align-items-center justify-content-between mb-4">
    <!-- Page Heading -->
    <div>
      <h1 class="h3 mb-2 text-gray-800">{{ text.title }}</h1>
      <p class="mb-4">{{ text.description }}</p>
    </div>
    {% if 'run' in text.title|lower %}
    <a id="RunConfigButton" class="btn btn-sm btn-primary btn-icon-split shadow-sm" href="#" data-toggle="modal" data-target="#newPipeRun">
      <span class="icon text-white-600">
        <i class="fa fa-plus fa-lg"></i>
      </span>
      <span class="text">New Pipeline Run</span>
    </a>
    {% endif %}
  </div>

  <!-- DataTales Example -->
  <div class="card shadow mb-4">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-bordered table-striped table-hover" id="dataTable" width="100%" cellspacing="0">
          <thead>
            <tr>
              {% for name in datatable.colsNames %}
              <th>{{ name }}</th>
              {% endfor %}
            </tr>
          </thead>
          <tfoot>
            <tr>
              {% for name in datatable.colsNames %}
              <th>{{ name }}</th>
              {% endfor %}
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>

</div>
<!-- /.container-fluid -->
{% endblock content %}


{% block modal %}

<!-- Update Comment Modal-->
<div class="modal fade" id="newPipeRun" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-pipeconfig" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title m-0 font-weight-bold text-primary" id="exampleModalLabel">Create a pipeline run with the following configuration</h5>
        <button class="close" type="button" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">Ã—</span>
        </button>
      </div>
      <div class="modal-body">
        <form action="{% url 'pipeline:run_index' %}" method="post" id="commentForm">
          {% csrf_token %}
          <div class="form-group">
            <label for="imagesFilesDropDown" class="col-form-label font-weight-bold text-gray-800">Select images files</label><br>
            <select id="imagesFilesDropDown" class="selectpicker form-control form-control-file" data-live-search="true" multiple data-max-options="2" data-header="Choose image files" data-actions-box="true">
            </select>
            <label for="selavyFilesDropDown" class="col-form-label font-weight-bold text-gray-800">Select selavy files</label><br>
            <select id="selavyFilesDropDown" class="selectpicker form-control form-control-file" data-live-search="true" multiple data-max-options="2" data-header="Choose selavy files" data-actions-box="true">
            </select>
            <div class="custom-control custom-switch">
              <input type="checkbox" class="custom-control-input" id="monitorSwitch">
              <label class="custom-control-label font-weight-bold text-gray-800" for="monitorSwitch">Monitor: Turn on source force extraction backward and forward in time</label>
            </div>
            <div class="row">
              <div class="col">
                <label class="col-form-label font-weight-bold text-gray-800" for="monitorMinSigmaSelect">Monitor Min Sigma</label>
                <input id="monitorMinSigmaSelect" type="number" class="form-control bg-light border-0" value="3.0" min="0" step="0.01" aria-label="monitorMinSigmaSearch" aria-describedby="basic-addon2" disabled>
              </div>
              <div class="col">
                <label class="col-form-label font-weight-bold text-gray-800" for="monitorEdgeBufferScaleSelect">Monitor Edge Buffer Scale</label>
                <input id="monitorEdgeBufferScaleSelect" type="number" class="form-control bg-light border-0" value="1.2" min="0" step="0.01" aria-label="monitorEdgeBufferScaleSearch" aria-describedby="basic-addon2" disabled>
              </div>
            </div>
            <label for="bkgFilesDropDown" class="col-form-label font-weight-bold text-gray-800">Select background files</label><br>
            <select id="bkgFilesDropDown" class="selectpicker form-control form-control-file" data-live-search="true" multiple data-max-options="2" data-header="Choose background files" data-actions-box="true" disabled>
            </select>
            <label for="noiseFilesDropDown" class="col-form-label font-weight-bold text-gray-800">Select noise or rms files</label><br>
            <select id="noiseFilesDropDown" class="selectpicker form-control form-control-file" data-live-search="true" multiple data-max-options="2" data-header="Choose noise or rms files" data-actions-box="true" disabled>
            </select>
            <div class="row">
              <div class="col">
                <label class="col-form-label font-weight-bold text-gray-800" for="associationTypeSelect">Association Method</label>
                <select id="associationTypeSelect" class="form-control bg-light border-0" aria-label="associationTypeSearch" aria-describedby="basic-addon2">
                  <option value="basic" selected>Basic</option>
                  <option value="advanced">Advanced</option>
                </select>
                <label class="col-form-label font-weight-bold text-gray-800" for="astroUncertRaSelect">Astrometric Uncertainty Ra</label>
                <input id="astroUncertRaSelect" type="number" class="form-control bg-light border-0" value="1.0" min="0" step="0.01" aria-label="astroUncertRaSearch" aria-describedby="basic-addon2">
              </div>
              <div class="col">
                <label class="col-form-label font-weight-bold text-gray-800" for="associationRadiusSelect">Association Radius</label>
                <input id="associationRadiusSelect" type="number" class="form-control bg-light border-0" value="5.0" min="0" step="0.01" aria-label="associationRadiusSearch" aria-describedby="basic-addon2">
                <label class="col-form-label font-weight-bold text-gray-800" for="astroUncertDecSelect">Astrometric Uncertainty Dec</label>
                <input id="astroUncertDecSelect" type="number" class="form-control bg-light border-0" value="1.0" min="0" step="0.01" aria-label="astroUncertDecSearch" aria-describedby="basic-addon2">
              </div>
              <div class="col">
                <label class="col-form-label font-weight-bold text-gray-800" for="associationDeRuiterSelect">Association De Ruiter Radius</label>
                <input id="associationDeRuiterSelect" type="number" class="form-control bg-light border-0" value="5.68" min="0" step="0.01" aria-label="associationDeRuiterSearch" aria-describedby="basic-addon2">
                <label class="col-form-label font-weight-bold text-gray-800" for="newSourceMinSigSelect">New Source Min Sigma</label>
                <input id="newSourceMinSigSelect" type="number" class="form-control bg-light border-0" value="5.0" min="0" step="0.01" aria-label="newSourceMinSigSearch" aria-describedby="basic-addon2">
              </div>
              <div class="col">
                <label class="col-form-label font-weight-bold text-gray-800" for="associationBeamWidthSelect">Association Beam Width</label>
                <input id="associationBeamWidthSelect" type="number" class="form-control bg-light border-0" value="1.0" min="0" step="0.01" aria-label="associationBeamWidthSearch" aria-describedby="basic-addon2">
                <label class="col-form-label font-weight-bold text-gray-800" for="surveySelect">Default Survey (TBC)</label>
                <select id="surveySelect" class="form-control bg-light border-0" aria-label="surveySearch" aria-describedby="basic-addon2" disabled>
                  <option value="None" selected>None</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <label class="col-form-label font-weight-bold text-gray-800" for="fluxPercErrorSelect">Flux Percentage Error</label>
                <input id="fluxPercErrorSelect" type="number" class="form-control bg-light border-0" value="0" min="0" max="100" step="0.01" aria-label="fluxPercErrorSearch" aria-describedby="basic-addon2">
              </div>
              <div class="col">
                <label class="col-form-label font-weight-bold text-gray-800" for="localRmsZeroFillSelect">Selavy Local RMS Zero Fill Value</label>
                <input id="localRmsZeroFillSelect" type="number" class="form-control bg-light border-0" value="0.2" min="0" step="0.01" aria-label="localRmsZeroFillSearch" aria-describedby="basic-addon2">
              </div>
            </div>
            <div class="custom-control custom-switch">
              <input type="checkbox" class="custom-control-input" id="condomErrorSwitch" checked="checked">
              <label class="custom-control-label font-weight-bold text-gray-800" for="condomErrorSwitch">Use Condon Errors</label>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
            <input class="btn btn-primary" type="submit" value="Create">
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock modal %}




{% block custom_page_scripts %}
<!-- Page level plugins -->
<script src="{% static 'vendor/datatables/jquery.dataTables.min.js' %}"></script>
<script src="{% static 'vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>
<!-- Bootstrap-select minified JavaScript -->
<script src="{% static 'vendor/bootstrap-select/js/bootstrap-select.min.js' %}"></script>
<!-- Run Config modal script -->
<script type="text/javascript" src="{% static 'js/run-config.min.js' %}"></script>

<!-- Page level custom scripts -->
{{ datatable|json_script:"datatable-conf" }}
<script src="{% static 'js/datatables-pipeline.min.js' %}"></script>
{% endblock custom_page_scripts %}
